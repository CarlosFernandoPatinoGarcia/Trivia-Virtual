/* Extracted styles from index.html */
html {
    /* Reduce global root font-size so Tailwind rem-based sizes are slightly smaller at 100% zoom */
    font-size: 14px;
}

:root {
    --neon-blue: #00f3ff;
    --neon-purple: #bc13fe;
    --hud-black: rgba(10, 10, 15, 0.95);
}

/* Shared utilities migrated from ar-cofre.css */
.scan-line {
    min-height: 100vh;
    overflow-x: hidden;
    overflow-y: auto;
}

@keyframes scan {
    0% {
        transform: translateY(0);
    }

    100% {
        transform: translateY(100vh);
    }
}

.pulse-glow {
    animation: pulse-glow 2s infinite;
}

@keyframes pulse-glow {

    0%,
    100% {
        box-shadow: 0 0 5px rgba(0, 243, 255, 0.5);
    }

    50% {
        box-shadow: 0 0 20px rgba(0, 243, 255, 0.8), 0 0 30px rgba(0, 243, 255, 0.4);
    }
}

/* HUD common panel styling (shared between pages) */
.hud-panel {
    background: rgba(10, 10, 15, 0.8);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(0, 243, 255, 0.3);
    border-radius: 16px;
    padding: 20px;
    margin: 20px 0;
    position: relative;
    overflow: hidden;
}

.hud-panel::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--neon-blue), transparent);
}

body {
    margin: 0;

    background-color: #111;
    font-family: 'Segoe UI', sans-serif;
}

#canvas-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
}

/* UI Overlay futurista */
.glass-panel {
    /* background: rgba(16, 20, 30, 0.85); */
    backdrop-filter: blur(15px);
    border: 1px solid rgba(0, 255, 255, 0.2);
    box-shadow: 0 0 15px rgba(0, 255, 255, 0.1);
    color: white;
    transition: all 0.3s ease;
}

/* Make sure content badges like #q-category are visible above panels */
#question-panel {
    overflow: visible;
}

/* Soft neon glow for important text */
.text-glow {
    text-shadow: 0 0 8px rgba(0, 243, 255, 0.6), 0 0 14px rgba(188, 19, 254, 0.25);
}

/* Category badge inside question panel */
#q-category {
    color: #ffffff;
    /* higher contrast than neon-blue on dark backgrounds */
    background: linear-gradient(90deg, rgba(0, 0, 0, 0.6), rgba(255, 255, 255, 0.02));
    padding: 0.35rem 0.9rem;
    border-radius: 999px;
    z-index: 60;
    display: inline-block;
    letter-spacing: 0.12em;
}

.chat-bubble-ai {
    background: linear-gradient(135deg, #004e92 0%, #000428 100%);
    border-left: 4px solid #00d2ff;
    border-radius: 0 12px 12px 12px;
    padding: 10px;
    margin-bottom: 8px;
    font-size: 0.9rem;
    animation: fadeIn 0.3s ease-out;
    text-align: left;
}

.chat-bubble-user {
    background: rgba(255, 255, 255, 0.1);
    border-right: 4px solid #00ff88;
    border-radius: 12px 0 12px 12px;
    padding: 10px;
    margin-bottom: 8px;
    text-align: right;
    font-size: 0.9rem;
    animation: fadeIn 0.3s ease-out;
}

/* Asegurar que el área de mensajes use alineación a la izquierda por defecto */
#chat-messages-area {
    text-align: left;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(5px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Video input oculto */
#input-video {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    pointer-events: none;
    z-index: -1;
}

/* Vista previa de cámara dentro del hint-overlay */
.hint-video {
    width: 320px;
    height: 240px;
    object-fit: cover;
    border-radius: 12px;
    box-shadow: 0 6px 30px rgba(0, 0, 0, 0.6), 0 0 18px rgba(250, 204, 21, 0.25);
    border: 2px solid rgba(250, 204, 21, 0.2);
    transform: scaleX(-1);
    /* espejo para vista tipo selfie */
    -webkit-transform: scaleX(-1);
    display: block;
}

/* Cursor virtual */
#hand-cursor {
    position: absolute;
    width: 20px;
    height: 20px;
    border: 2px solid #00ff88;
    border-radius: 50%;
    background: rgba(0, 255, 136, 0.3);
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 50;
    display: none;
    transition: width 0.1s, height 0.1s, background 0.1s;
}

#hand-cursor.clicking {
    background: #00ff88;
    width: 15px;
    height: 15px;
}

.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 100;
    color: #00d2ff;
}

/* Timer Bar */
#timer-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: #111;
    z-index: 60;
}

#timer-bar {
    height: 100%;
    width: 100%;
    background: #00d2ff;
    transition: width 1s linear, background 0.3s;
}

/* Score / Credits flash (visual feedback al ganar puntos) */
@keyframes scorePulse {
    0% {
        transform: scale(1);
        text-shadow: 0 0 0 rgba(255, 255, 255, 0);
    }

    50% {
        transform: scale(1.12);
        text-shadow: 0 0 20px rgba(255, 220, 120, 0.9);
    }

    100% {
        transform: scale(1);
        text-shadow: 0 0 0 rgba(255, 255, 255, 0);
    }
}

.score-flash {
    animation: scorePulse 0.8s ease-in-out;
    color: #fff !important;
    filter: drop-shadow(0 0 8px rgba(255, 200, 80, 0.9));
}

.timer-critical {
    background: #ff0055 !important;
    box-shadow: 0 0 10px #ff0055;
}

.timer-frozen {
    background: #00ffff !important;
    box-shadow: 0 0 10px #00ffff;
}

/* Hub Overlay */
#hub-overlay {
    display: none;
}

/* Audio controls */
.audio-controls {
    padding-left: 6px;
}

.audio-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.audio-range {
    -webkit-appearance: none;
    background: linear-gradient(90deg, #00d2ff, #7c4dff);
    border-radius: 999px;
}

.audio-range::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #fff;
    box-shadow: 0 0 6px rgba(0, 0, 0, 0.6);
}

.audio-range:focus {
    outline: none;
}


/* PANTALLA DE INICIO */


/* Pantalla de inicio */
#start-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #000428 0%, #004e92 100%);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 200;
    backdrop-filter: blur(10px);
}

.start-container {
    text-align: center;
    padding: 1.5rem;
    /* reduce padding to make elements less large */
    background: rgba(8, 15, 30, 0.9);
    border: 2px solid var(--neon-blue);
    border-radius: 2rem;
    box-shadow: 0 0 50px rgba(0, 243, 255, 0.3);
    max-width: 520px;
    /* slightly narrower */
    animation: pulse-glow 3s infinite;
}

.start-title {
    font-size: 3rem;
    /* scale down big title */
    font-weight: 900;
    background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 1rem;
    text-shadow: 0 0 30px rgba(188, 19, 254, 0.5);
    letter-spacing: 0.2em;
}

.start-subtitle {
    font-size: 1.1rem;
    color: var(--neon-blue);
    margin-bottom: 3rem;
    font-weight: 300;
    letter-spacing: 0.1em;
}

.start-button {
    background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
    border: none;
    color: white;
    padding: 1rem 2.5rem;
    font-size: 1.05rem;
    font-weight: 700;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    box-shadow: 0 0 30px rgba(0, 243, 255, 0.5);
    position: relative;
    overflow: hidden;
}

.start-button:hover {
    transform: translateY(-5px);
    box-shadow: 0 0 40px rgba(0, 243, 255, 0.8);
}

.start-button:active {
    transform: translateY(0);
}

.start-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.start-button:hover::before {
    left: 100%;
}

.start-features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
    width: 100%;
}

.feature-item {
    background: rgba(255, 255, 255, 0.05);
    padding: 1rem;
    border-radius: 1rem;
    border: 1px solid rgba(0, 243, 255, 0.2);
    transition: all 0.3s ease;
}

.feature-item:hover {
    transform: translateY(-3px);
    border-color: var(--neon-blue);
    box-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
}

.feature-icon {
    font-size: 2rem;
    color: var(--neon-blue);
    margin-bottom: 1rem;
}

.feature-text {
    color: white;
    font-size: 0.9rem;
    line-height: 1.4;
}

/* Animación de partículas para el fondo */
.particles {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
}

.particle {
    position: absolute;
    background: var(--neon-blue);
    border-radius: 50%;
    animation: float-particle 6s infinite ease-in-out;
}

@keyframes float-particle {

    0%,
    100% {
        transform: translateY(0) rotate(0deg);
        opacity: 0;
    }

    50% {
        opacity: 0.7;
    }

    25% {
        transform: translateY(-20px) rotate(90deg);
    }

    75% {
        transform: translateY(20px) rotate(270deg);
    }
}

/* Responsive para pantalla de inicio */
@media (max-width: 768px) {
    .start-container {
        margin: 1rem;
        padding: 2rem;
    }

    .start-title {
        font-size: 2.5rem;
    }

    .start-subtitle {
        font-size: 1.2rem;
    }

    .start-button {
        padding: 1.2rem 2.5rem;
        font-size: 1.2rem;
    }

    .start-features {
        grid-template-columns: 1fr;
    }
}

/* PANTALLA DE RECOMPENSA CON COFRE */

.chest-glow {
    animation: chestPulse 2s ease-in-out infinite alternate;
}

.reward-float {
    animation: float 3s ease-in-out infinite;
}

@keyframes chestPulse {
    0% {
        box-shadow: 0 0 20px rgba(188, 19, 254, 0.5),
            0 0 40px rgba(0, 243, 255, 0.3),
            0 0 60px rgba(188, 19, 254, 0.2);
    }

    100% {
        box-shadow: 0 0 30px rgba(188, 19, 254, 0.8),
            0 0 60px rgba(0, 243, 255, 0.5),
            0 0 90px rgba(188, 19, 254, 0.3);
    }
}

@keyframes float {

    0%,
    100% {
        transform: translateY(0px);
    }

    50% {
        transform: translateY(-10px);
    }
}

.particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: #00f3ff;
    border-radius: 50%;
    animation: particleFloat 3s infinite linear;
}

@keyframes particleFloat {
    0% {
        transform: translateY(0) translateX(0);
        opacity: 1;
    }

    100% {
        transform: translateY(-100px) translateX(20px);
        opacity: 0;
    }
}

.unlock-animation {
    animation: unlockShake 0.5s ease-in-out;
}

@keyframes unlockShake {

    0%,
    100% {
        transform: translateX(0);
    }

    25% {
        transform: translateX(-5px);
    }

    75% {
        transform: translateX(5px);
    }
}

/* Compact styles for Hub overlay (OLEADA COMPLETA) */
/* Hub compact tweaks: denser layout */
#hub-overlay .glass-panel {
    padding: 0.5rem;
    /* tighter */
    max-width: 780px;
}

.hub-title {
    font-size: 2.6rem;
    /* smaller, compact */
    font-weight: 800;
    color: #ffffff;
    margin-bottom: 0.2rem;
    letter-spacing: 0.03em;
    text-align: center;
}

.hub-subtitle {
    font-size: 0.9rem;
    margin-bottom: 0.6rem;
    text-align: center;
}

.hub-stat-value {
    font-size: 1.15rem;
    /* reduce further */
    line-height: 1;
}

/* Make stat cards denser */
#hub-overlay .grid {
    gap: 0.6rem;
}

#hub-overlay .grid>div {
    padding: 0.6rem;
    /* override p-6 */
}

/* Shrink icons inside hub */
#hub-overlay .fa-check-circle,
#hub-overlay .fa-coins,
#hub-overlay .fa-cube {
    font-size: 1.25rem;
    /* smaller icons */
    margin-bottom: 0.35rem;
}

/* Chest pieces sizing - target top and base separately to avoid size mismatch */
#hub-overlay .chest-container .chest-top {
    width: 88px !important;
    /* chest top width */
    height: 64px !important;
    /* chest top height */
    border-radius: 8px;
}

#hub-overlay .chest-container .chest-base {
    width: 96px !important;
    /* slightly wider base for visual support */
    height: 10px !important;
    /* short base */
    margin-top: 6px !important;
    border-radius: 6px;
}

#hub-qr {
    width: 130px !important;
    height: 130px !important;
}

.reward-float {
    font-size: 16px;
}

/* Compact next wave button */
#btn-next-wave {
    padding: 0.6rem 0.9rem;
    font-size: 0.98rem;
}

@media (max-width: 768px) {
    .hub-title {
        font-size: 1.4rem;
    }

    .hub-stat-value {
        font-size: 1rem;
    }

    #hub-qr {
        width: 60px !important;
        height: 60px !important;
    }
}

/* Chat enlargement helpers: scale the chat panel and increase its internal control sizes
   to make buttons (mic, send) easier to reach with the virtual cursor.
   We use transform scale so the grid layout is preserved while visually enlarging the chat. */
#chat-wrapper {
    transform-origin: bottom right;
    /* Scale up moderately on desktop */
    transform: scale(1.1);
    /* Keep smooth transition for dynamic changes */
    transition: transform 180ms ease-in-out;
}

/* Slightly increase the wrapper height so scroll area remains comfortable after scaling */
#chat-wrapper {
    height: calc(400px * 1.22);
}

/* Header: larger icon and text for better readability */
#chat-wrapper .fa-satellite-dish {
    font-size: 1.5rem !important;
}

#chat-wrapper .text-sm.font-bold {
    font-size: 1rem !important;
}

/* Status dots larger and more visible */
#chat-wrapper .w-3.h-3 {
    width: 12px !important;
    height: 12px !important;
    border-radius: 50%;
}

#chat-wrapper .w-3.h-3.bg-green-500 {
    box-shadow: 0 0 10px #22c55e !important;
}

/* Messages: larger font and padding for easier targeting */
#chat-messages-area {
    font-size: 1.02rem !important;
    padding: 1rem !important;
}

/* Chat bubbles more tappable */
#chat-messages-area .chat-bubble-ai,
#chat-messages-area .chat-bubble-user {
    padding: 14px !important;
    border-radius: 14px !important;
}

/* Footer controls: enlarge mic, input and send button */
#chat-wrapper #chat-mic-btn {
    width: 56px !important;
    height: 56px !important;
    border-radius: 12px !important;
    font-size: 1.25rem !important;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

#chat-wrapper #chat-send-btn {
    width: 56px !important;
    height: 56px !important;
    border-radius: 12px !important;
    font-size: 1.15rem !important;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

#chat-wrapper #chat-input-field {
    font-size: 1rem !important;
    padding: 0.9rem 0.9rem !important;
}

/* Ensure the scaled chat does not push other UI out of place: allow overflow and keep pointer-events */
.row-start-2 .flex.items-end.pointer-events-none {
    overflow: visible;
    align-items: flex-end;
    /* ensure child chat pane stays anchored to bottom */
}

/* Force chat wrapper to a sane max-height so it doesn't stretch the layout */
#chat-wrapper {
    align-self: flex-end !important;
    max-height: 70vh !important;
    height: auto !important;
}

@media (min-width: 768px) {

    /* On medium+ screens keep fixed height for chat to avoid stretching */
    #chat-wrapper {
        height: 500px !important;
    }
}

/* Reduce scale on small screens to avoid clipping */
@media (max-width: 1024px) {
    #chat-wrapper {
        transform: scale(1.05);
        height: calc(500px * 1.05);
    }
}

@media (max-width: 640px) {
    #chat-wrapper {
        transform: scale(1);
        height: 500px;
    }
}

/* Mobile: ensure UI fits and is scrollable, center main panel and keep chat accessible */
@media (max-width: 640px) {

    /* Turn the overlay into a single-column flow so nothing overflows off-screen */
    #ui-overlay {
        grid-template-columns: 1fr !important;
        grid-template-rows: auto 1fr auto !important;
        padding: 8px !important;
        gap: 8px !important;
        pointer-events: auto !important;
        align-items: start;
        justify-items: center;
    }

    /* HUD panels become full-width, but allow them to shrink to avoid overflow */
    .hud-panel {
        min-width: 0 !important;
        width: calc(100% - 16px) !important;
    }

    /* Question panel: centered and constrained to viewport width */
    #question-panel {
        max-width: 100% !important;
        width: calc(100% - 16px) !important;
        padding: 1.25rem !important;
        left: 0 !important;
        transform: none !important;
        top: auto !important;
        margin: 8px auto !important;
        border-radius: 12px !important;
    }

    /* Ensure hint overlay fits mobile and can scroll if needed */
    #hint-overlay {
        position: fixed !important;
        inset: 12px !important;
        width: calc(100% - 24px) !important;
        height: calc(100% - 24px) !important;
        border-radius: 12px !important;
        overflow: auto !important;
        z-index: 90 !important;
    }

    /* Chat becomes a fixed bottom pane, full width with safe margins */
    #chat-wrapper {
        position: fixed !important;
        bottom: 12px !important;
        left: 12px !important;
        right: 12px !important;
        width: calc(100% - 24px) !important;
        height: 320px !important;
        transform: scale(1) !important;
        z-index: 80 !important;
        border-radius: 12px !important;
    }

    /* Hub overlay panel width and margin adjustments */
    #hub-overlay .glass-panel {
        max-width: calc(100% - 24px) !important;
        margin: 0 12px !important;
    }

    /* Allow body scroll on mobile so content never gets clipped; use smooth scrolling for touch */
    html,
    body {
        height: 100%;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch;
    }

    /* Make chat messages area scrollable within the fixed chat pane */
    #chat-messages-area {
        max-height: calc(100% - 140px);
        overflow-y: auto;
    }

    /* Keep timer visible but small */
    #timer-container {
        height: 4px;
    }

    /* Ensure interactive elements are fully tappable */
    #chat-wrapper #chat-mic-btn,
    #chat-wrapper #chat-send-btn,
    #chat-wrapper #chat-input-field {
        touch-action: manipulation;
    }
}
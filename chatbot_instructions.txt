Chatbot: Opción simple (Botpress) y modo local fallback
=====================================================

Resumen rápido
--------------
- Opción simple y recomendada para comenzar: Botpress (self-hosted). Fácil de ejecutar con Docker y expone una API REST que la UI puede llamar.
- Alternativa mínima: usar el modo local fallback incorporado en `js/chatbot.js` (no requiere servicios externos).

Botpress (opción simple)
------------------------
Requisitos:
- Docker instalado (o instalar Botpress localmente desde binarios).

Pasos básicos (Docker):

1. Descargar imagen y ejecutar:

```powershell
docker run -p 3000:3000 -v "./botpress_data:/bp/data" botpress/server:latest
```

2. Abrir `http://localhost:3000` en el navegador y crear un bot nuevo.

3. Crear un flujo simple que reciba texto y responda. Para validar respuestas de preguntas, puedes crear una acción personalizada (hook) que reciba payload JSON con `question` y `answerIndex` y devuelva si es correcto.

4. Para conectar desde la aplicación (index.html/js): usa la API REST de Botpress.

Endpoint de ejemplo (converse):

- POST `http://localhost:3000/api/v1/bots/<BOT_ID>/converse/<USER_ID>`
- Body: `{ "type": "text", "text": "Hola" }`

Ejemplo de conexión desde `js/chatbot.js`:

- Configurar: `new ChatbotClient({ remote: true, url: 'http://localhost:3000', botId: '<BOT_ID>', token: '' })`

Datos necesarios para conectar:
- `BOTPRESS_URL` (ej. `http://localhost:3000`)
- `BOT_ID` (identificador del bot creado en Botpress)
- `API_TOKEN` (si tu Botpress requiere autenticación)

Validación de respuestas (recomendado)
-----------------------------------
- Opción A (simple): validar en el cliente usando la propiedad `a` dentro del objeto pregunta (vea `generateQuestions()` en `index.html`).
- Opción B (recomendada para producción): exponer una acción en Botpress que reciba `{ questionId, answerIndex }` y devuelva `{ correct: true/false, correctAnswer: '...' }`.

Modo local fallback (sin servicios externos)
-------------------------------------------
- El archivo `js/chatbot.js` incluye `ChatbotClient` con `remote=false` por defecto.
- Llamar `chatbot.validateAnswerLocal(questionObject, selectedIndex)` para validar respuestas directamente en el cliente.

Notas de seguridad y datos
-------------------------
- Si usas Botpress en producción, protege las APIs con token y HTTPS.
- No expongas claves en el frontend; preferir un backend intermedio que firme peticiones.

Soporte e integración
---------------------
- Para integración con analíticas y reporting, captura eventos clave (respuesta correcta/incorrecta, tiempo por pregunta) y envíalos a un endpoint backend o servicio de analíticas. Esa información alimentará la pestaña `Sistema` descrita en la solicitud.

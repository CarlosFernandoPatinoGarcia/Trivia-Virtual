<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>DuoTrivia - Chatbot de Trivia</title>
    <link rel="icon" href="data:;base64,=">
    <link rel="stylesheet" href="duotrivia/css/styles.css" />
    <!-- Nota: Este index es el único para GitHub Pages -->
</head>

<body>
    <div id="app-root" class="layout">
        <!-- Panel de Datos -->
        <aside class="sidebar" aria-label="Panel de Datos">
            <h1 class="brand">DuoTrivia</h1>
            <div class="stats-block">
                <div class="stat">Puntaje: <span id="stat-score">0</span></div>
                <div class="stat">Racha: <span id="stat-streak">0</span></div>
                <div class="stat">Preguntas: <span id="stat-total">0</span></div>
                <div class="stat">Acierto: <span id="stat-accuracy">0%</span></div>
            </div>
            <div class="kpi-card" aria-label="KPI de acierto">
                <div class="kpi-label">KPI Acierto</div>
                <div class="kpi-value" id="kpi-accuracy">0%</div>
                <div class="kpi-sub" id="kpi-trend">—</div>
            </div>
            <button id="btn-open-charts" class="send-btn" type="button" aria-haspopup="dialog"
                aria-controls="charts-modal">Gráficas</button>
            <div class="help-box">
                <p><strong>Comandos:</strong></p>
                <ul>
                    <li><code>jugar</code>: nueva pregunta</li>
                    <li><code>puntaje</code>: ver estadísticas</li>
                    <li><code>ayuda</code>: ayuda rápida</li>
                </ul>
            </div>
        </aside>

        <!-- Chat Principal -->
        <section class="chat-section" aria-label="Chat de DuoTrivia">
            <div id="chat-log" class="chat-log" aria-live="polite"></div>
            <form id="chat-form" autocomplete="off" class="chat-input-row">
                <input id="user-input" type="text" placeholder="Escribe aquí..." aria-label="Mensaje del usuario"
                    required />
                <button type="submit" class="send-btn">Enviar</button>
            </form>
        </section>
    </div>

    <!-- Modal de Gráficas -->
    <div id="charts-modal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="charts-title">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="charts-title">Estadísticas de Preguntas</h2>
                <button id="btn-close-charts" class="icon-btn" aria-label="Cerrar">✕</button>
            </div>
            <div class="menu-tabs" role="tablist">
                <button class="tab-btn active" data-target="#barChart" role="tab" aria-selected="true">Barras</button>
                <button class="tab-btn" data-target="#pieChart" role="tab" aria-selected="false">Pastel</button>
                <button class="tab-btn" data-target="#lineChart" role="tab" aria-selected="false">Líneas</button>
                <button class="tab-btn" data-target="#datasetPanel" role="tab" aria-selected="false">Dataset</button>
            </div>
            <div class="chart-area">
                <canvas id="barChart" width="640" height="360"></canvas>
                <canvas id="pieChart" width="360" height="360" class="hidden"></canvas>
                <canvas id="lineChart" width="640" height="320" class="hidden"></canvas>
                <div id="datasetPanel" class="hidden">
                    <div class="dataset-controls">
                        <label for="difficulty-filter">Dificultad:</label>
                        <select id="difficulty-filter">
                            <option value="easy">Fácil</option>
                            <option value="medium">Media</option>
                            <option value="hard">Difícil</option>
                        </select>
                    </div>
                    <canvas id="category-chart" width="640" height="320"></canvas>
                    <div class="questions-wrap">
                        <h3>Preguntas</h3>
                        <ul id="questions-list"></ul>
                    </div>
                </div>
            </div>
            <div class="system-hint">Basado en respuestas correctas vs. incorrectas.</div>
        </div>
    </div>

    <script type="module" src="duotrivia/js/app.js"></script>
</body>

</html>